<div id="collection"
     class="collection content-wrapper"
     data-bind="with: $root.collection, removed_from_view: $root.collection.removed_from_view">

  <!-- ko if: conversation_et() -->

    <div class="content-titlebar">

      <div class="content-titlebar-items-left">
        <span class="content-titlebar-icon icon-back" data-bind="click: click_on_back_button"></span>
      </div>

      <span class="content-titlebar-items-center">
        <span><span class="label-bold-xs">Collection</span> <span class="text-graphite">in</span> <span class="text-graphite" data-bind="text: conversation_et().display_name()"></span></span>
      </span>

    </div>

    <div class="content-list collection-list">

      <!-- ko ifnot: no_items_found() -->

        <!-- ko if: images().length -->
          <section class="collection-section" data-uie-name="collection-section-image">
            <header>
              <span class="label-bold-xs">Pictures</span>
              <span class="label-xs" data-bind="click: function() { click_on_section('images', images()) }">All <span data-bind="text: images().length" data-uie-name="collection-size"></span> <span class="icon-forward font-size-xxs"></span></span>
            </header>
            <div class="collection-images">
              <!-- ko foreach: {data: images.slice(0,8), as: 'message_et'} -->
                <image-component class="collection-image" params="asset: message_et.get_first_asset().resource"></image-component>
              <!-- /ko -->
            </div>
          </section>
        <!-- /ko -->

        <!-- ko if: links().length -->
          <section class="collection-section" data-uie-name="collection-section-link">
            <header>
              <span class="label-bold-xs">Links</span>
              <span class="label-xs" data-bind="click: function() { click_on_section('links', links()) }">All <span data-bind="text: links().length" data-uie-name="collection-size"></span> <span class="icon-forward font-size-xxs"></span></span>
            </header>
            <div>
              <!-- ko foreach: {data: links.slice(0,2), as: 'message_et'} -->
                <header class="collection-link-header">
                  <user-avatar class="user-avatar-xs" params="user: message_et.user"></user-avatar>
                  <span class="label-bold-xs" data-bind="text: message_et.sender_name()"></span>
                  <span class="collection-link-timestamp label-xs text-graphite" data-bind="text: moment(message_et.timestamp).format('D.M HH:MM')"></span>
                </header>
                <link-preview-asset class="collection-link" params="preview: message_et.get_first_asset().previews()[0]"></link-preview-asset>
              <!-- /ko -->
            </div>
          </section>
        <!-- /ko -->

        <!-- ko if: video().length -->
          <section class="collection-section" data-uie-name="collection-section-video">
            <header>
              <span class="label-bold-xs">Videos</span>
              <span class="label-xs" data-bind="click: function() { click_on_section('video', video()) }">All <span data-bind="text: video().length" data-uie-name="collection-size"></span> <span class="icon-forward font-size-xxs"></span></span>
            </header>
            <div class="collection-images">
              <!-- ko foreach: {data: video.slice(0,5), as: 'message_et'} -->
                <video-asset class="collection-image" params="asset: message_et.get_first_asset()"></video-asset>
              <!-- /ko -->
            </div>
          </section>
        <!-- /ko -->

        <!-- ko if: audio().length -->
          <section class="collection-section" data-uie-name="collection-section-audio">
            <header>
              <span class="label-bold-xs">Audio</span>
              <span class="label-xs" data-bind="click: function() { click_on_section('audio', audio()) }">All <span data-bind="text: audio().length" data-uie-name="collection-size"></span> <span class="icon-forward font-size-xxs"></span></span>
            </header>
            <div class="collection-images">
              <!-- ko foreach: {data: audio.slice(0,2), as: 'message_et'} -->
                <audio-asset class="collection-file" params="asset: message_et.get_first_asset()"></audio-asset>
              <!-- /ko -->
            </div>
          </section>
        <!-- /ko -->

        <!-- ko if: files().length -->
          <section class="collection-section" data-uie-name="collection-section-file">
            <header>
              <span class="label-bold-xs">Files</span>
              <span class="label-xs" data-bind="click: function() { click_on_section('files', files()) }">All <span data-bind="text: files().length" data-uie-name="collection-size"></span> <span class="icon-forward font-size-xxs"></span></span>
            </header>
            <div class="collection-images">
              <!-- ko foreach: {data: files.slice(0,2), as: 'message_et'} -->
                <file-asset class="collection-file" params="asset: message_et.get_first_asset()"></file-asset>
              <!-- /ko -->
            </div>
          </section>
        <!-- /ko -->

      <!-- /ko -->

      <!-- ko if: no_items_found() -->

        <div class="absolute-center" data-uie-name="collection-no-items">
          <div class="collection-no-items-icon icon-collection"></div>
          <div class="label-bold-xs text-graphite text-center">No items</div>
        </div>

      <!-- /ko -->

    </div>

  <!-- /ko -->

</div>
